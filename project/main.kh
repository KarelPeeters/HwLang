// TODO all IO is really async, so we need synchronization!
def main(
    clk: in clock,
    reset_n: async in bool,
    buttons: in bits(4),
    switches: in bits(4),
    leds: out bits(4),
) {
    let buttons = synchronize(clk, 2, buttons);
    let switches = synchronize(clk, 2, switches);

    // leds = switches;
    // TODO how to set reset values?

    sync(clk) {
        leds = switches & buttons;
    }
}
